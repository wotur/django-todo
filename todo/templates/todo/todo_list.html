<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <h2>–§–∏–ª—å—Ç—Ä –∑–∞–¥–∞—á</h2>
<p>
    <a href="{% url 'todo_list_create' %}">–í—Å–µ</a> |
    <a href="?filter=done">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</a> |
    <a href="?filter=undone">‚ùå –ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</a>
</p>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <title>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</title>
</head>
<body>
    {% if user.is_authenticated %}
        <p>–ü—Ä–∏–≤–µ—Ç, {{ user.username }}!</p>
        <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" style="background:none;border:none;color:blue;cursor:pointer;">
                –í—ã–π—Ç–∏
            </button>
        </form>
    {% endif %}

    <h1>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h1>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>

    <h2>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
    <ul>
        {% for todo in todos %}
            <li>
                <strong>{{ todo.title }}</strong>
                {% if todo.is_completed %}
                    ‚úÖ
                {% else %}
                    ‚ùå
                {% endif %}
                <br>
                {{ todo.description }}
                <br>
                <small>–°–æ–∑–¥–∞–Ω–æ: {{ todo.created_at|date:"d.m.Y H:i" }}</small>
                <br>
                <a href="{% url 'edit_task' todo.pk %}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a> |
                <a href="{% url 'delete_task' todo.pk %}">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
            </li>
        {% empty %}
            <li>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á.</li>
        {% endfor %}
    </ul>
</body>
</html>
